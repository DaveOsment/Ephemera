{
    "version": 1,
    "serial": 6,
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_iam_access_key.lb": {
                    "type": "aws_iam_access_key",
                    "depends_on": [
                        "aws_iam_user.ephemera_s3_url_signer"
                    ],
                    "primary": {
                        "id": "AKIAJ5YC5VL2Q56KG72A",
                        "attributes": {
                            "id": "AKIAJ5YC5VL2Q56KG72A",
                            "secret": "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",
                            "status": "Active",
                            "user": "EphemeraS3Signer"
                        }
                    }
                },
                "aws_iam_role.ephemera_lambda_executor_role": {
                    "type": "aws_iam_role",
                    "primary": {
                        "id": "EphemeraLambdaExecutor",
                        "attributes": {
                            "arn": "arn:aws:iam::080863329876:role/EphemeraLambdaExecutor",
                            "assume_role_policy": "{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Action\": \"sts:AssumeRole\",\r\n      \"Principal\": {\r\n        \"Service\": \"ec2.amazonaws.com\"\r\n      },\r\n      \"Effect\": \"Allow\",\r\n      \"Sid\": \"\"\r\n    }\r\n  ]\r\n}\r\n",
                            "id": "EphemeraLambdaExecutor",
                            "name": "EphemeraLambdaExecutor",
                            "path": "/",
                            "unique_id": "AROAJ5DDJG643SRNND2OE"
                        }
                    }
                },
                "aws_iam_role.ephemera_lambda_role": {
                    "type": "aws_iam_role",
                    "primary": {
                        "id": "EphemeraLambda",
                        "attributes": {
                            "arn": "arn:aws:iam::080863329876:role/EphemeraLambda",
                            "assume_role_policy": "{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Action\": \"sts:AssumeRole\",\r\n      \"Principal\": {\r\n        \"Service\": \"ec2.amazonaws.com\"\r\n      },\r\n      \"Effect\": \"Allow\",\r\n      \"Sid\": \"\"\r\n    }\r\n  ]\r\n}\r\n",
                            "id": "EphemeraLambda",
                            "name": "EphemeraLambda",
                            "path": "/",
                            "unique_id": "AROAJRSLLEOQKCHKLGWOQ"
                        }
                    }
                },
                "aws_iam_role_policy.ephemera_lambda_role_logger": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.ephemera_lambda_role"
                    ],
                    "primary": {
                        "id": "EphemeraLambda:EphemeraLambda-s3Uploader",
                        "attributes": {
                            "id": "EphemeraLambda:EphemeraLambda-s3Uploader",
                            "name": "EphemeraLambda-s3Uploader",
                            "policy": "{\r\n  \"Version\": \"2012-10-17\", \r\n  \"Statement\": [\r\n    {\r\n      \"Action\": [ \r\n        \"logs:*\"\r\n      ],\r\n      \"Effect\": \"Allow\", \r\n      \"Resource\": \"arn:aws:logs:*:*:*\"\r\n    }\r\n  ]\r\n} \r\n",
                            "role": "EphemeraLambda"
                        }
                    }
                },
                "aws_iam_role_policy.ephemera_lambda_role_s3Uploader": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.ephemera_lambda_role"
                    ],
                    "primary": {
                        "id": "EphemeraLambda:EphemeraLambda-s3Uploader",
                        "attributes": {
                            "id": "EphemeraLambda:EphemeraLambda-s3Uploader",
                            "name": "EphemeraLambda-s3Uploader",
                            "policy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"Stmt1440938489000\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"s3:PutObject*\",\r\n                \"s3:GetObject\",\r\n                \"s3:DeleteObject\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::smartin-test-20150917-private\",\r\n                \"arn:aws:s3:::smartin-test-20150917-private/*\",\r\n                \"arn:aws:s3:::smartin-test-20150917-public\",\r\n                \"arn:aws:s3:::smartin-test-20150917-public/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n",
                            "role": "EphemeraLambda"
                        }
                    }
                },
                "aws_iam_role_policy.ephemera_lambda_s3_uploader": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.ephemera_lambda_executor_role"
                    ],
                    "primary": {
                        "id": "EphemeraLambdaExecutor:EphemeraLambda-s3Uploader",
                        "attributes": {
                            "id": "EphemeraLambdaExecutor:EphemeraLambda-s3Uploader",
                            "name": "EphemeraLambda-s3Uploader",
                            "policy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"Stmt1442056373000\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"lambda:InvokeFunction\"\r\n            ],\r\n            \"Resource\": [\r\n                \"*\"\r\n            ]\r\n        },\r\n        {\r\n            \"Sid\": \"Stmt1442056419000\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"iam:PassRole\"\r\n            ],\r\n            \"Resource\": [\r\n                \"*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n",
                            "role": "EphemeraLambdaExecutor"
                        }
                    }
                },
                "aws_iam_user.ephemera_s3_url_signer": {
                    "type": "aws_iam_user",
                    "primary": {
                        "id": "EphemeraS3Signer",
                        "attributes": {
                            "arn": "arn:aws:iam::080863329876:user/system/EphemeraS3Signer",
                            "id": "EphemeraS3Signer",
                            "name": "EphemeraS3Signer",
                            "path": "/system/",
                            "unique_id": "AIDAJPBVCJM57ZBAGXWW4"
                        }
                    }
                },
                "aws_iam_user_policy.ephemera_s3_url_signer_policy": {
                    "type": "aws_iam_user_policy",
                    "depends_on": [
                        "aws_iam_user.ephemera_s3_url_signer"
                    ],
                    "primary": {
                        "id": "EphemeraS3Signer:EphemeraS3Signer-policy",
                        "attributes": {
                            "id": "EphemeraS3Signer:EphemeraS3Signer-policy",
                            "name": "EphemeraS3Signer-policy",
                            "policy": "{\r\n    \"Version\": \"2012-10-17\",\r\n    \"Statement\": [\r\n        {\r\n            \"Sid\": \"Stmt1440938489000\",\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": [\r\n                \"s3:PutObject*\"\r\n            ],\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::smartin-test-20150917-private\",\r\n                \"arn:aws:s3:::smartin-test-20150917-private/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n",
                            "user": "EphemeraS3Signer"
                        }
                    }
                },
                "aws_s3_bucket.private_s3_bucket": {
                    "type": "aws_s3_bucket",
                    "primary": {
                        "id": "smartin-test-20150917-private",
                        "attributes": {
                            "acl": "private",
                            "bucket": "smartin-test-20150917-private",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z1BKCTXD74EZPE",
                            "id": "smartin-test-20150917-private",
                            "policy": "",
                            "region": "eu-west-1",
                            "tags.#": "2",
                            "tags.Environment": "Dev",
                            "tags.Name": "Ephemera private bucket",
                            "website.#": "0"
                        }
                    }
                }
            }
        }
    ]
}
